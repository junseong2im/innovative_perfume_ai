{
  "openapi": "3.0.3",
  "info": {
    "title": "Fragrance AI API",
    "description": "ğŸŒ¸ ì™„ë²½í•œ AI í–¥ìˆ˜ ì¶”ì²œ ë° ìƒì„± í”Œë«í¼\n\n## ì£¼ìš” ê¸°ëŠ¥\n- ğŸ§  AI ê¸°ë°˜ í–¥ìˆ˜ ë ˆì‹œí”¼ ìƒì„±\n- ğŸ” ì˜ë¯¸ ê¸°ë°˜ í–¥ìˆ˜ ê²€ìƒ‰\n- ğŸ“Š ì‹¤ì‹œê°„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§\n- ğŸ›¡ï¸ ì—”í„°í”„ë¼ì´ì¦ˆ ë³´ì•ˆ\n\n## ì¸ì¦\nBearer í† í°ì„ ì‚¬ìš©í•œ JWT ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.\n\n```bash\nAuthorization: Bearer YOUR_JWT_TOKEN\n```",
    "version": "2.0.0",
    "contact": {
      "name": "Fragrance AI Team",
      "email": "api@fragrance-ai.com",
      "url": "https://fragrance-ai.com"
    },
    "license": {
      "name": "Proprietary License",
      "url": "https://fragrance-ai.com/license"
    },
    "termsOfService": "https://fragrance-ai.com/terms"
  },
  "servers": [
    {
      "url": "https://api.fragrance-ai.com/api/v2",
      "description": "Production Server"
    },
    {
      "url": "https://staging-api.fragrance-ai.com/api/v2",
      "description": "Staging Server"
    },
    {
      "url": "http://localhost:8000/api/v2",
      "description": "Development Server"
    }
  ],
  "paths": {
    "/semantic-search": {
      "post": {
        "tags": ["Search"],
        "summary": "ğŸ” ì˜ë¯¸ ê¸°ë°˜ í–¥ìˆ˜ ê²€ìƒ‰",
        "description": "ìì—°ì–´ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜ë¯¸ì ìœ¼ë¡œ ìœ ì‚¬í•œ í–¥ìˆ˜ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.",
        "operationId": "semantic_search",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SemanticSearchRequest"
              },
              "examples": {
                "basic_search": {
                  "summary": "ê¸°ë³¸ ê²€ìƒ‰",
                  "value": {
                    "query": "ìƒí¼í•˜ê³  ë¡œë§¨í‹±í•œ ë´„ í–¥ìˆ˜",
                    "top_k": 10,
                    "min_similarity": 0.7
                  }
                },
                "advanced_search": {
                  "summary": "ê³ ê¸‰ ê²€ìƒ‰",
                  "value": {
                    "query": "woody and mysterious evening fragrance",
                    "top_k": 5,
                    "search_type": "hybrid",
                    "collection_weights": {
                      "fragrance_notes": 1.0,
                      "recipes": 0.8
                    },
                    "filters": {
                      "season": "autumn",
                      "intensity": "strong"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "ê²€ìƒ‰ ì„±ê³µ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SemanticSearchResponse"
                },
                "examples": {
                  "success_response": {
                    "summary": "ì„±ê³µì ì¸ ê²€ìƒ‰ ê²°ê³¼",
                    "value": {
                      "query": "ìƒí¼í•˜ê³  ë¡œë§¨í‹±í•œ ë´„ í–¥ìˆ˜",
                      "results": [
                        {
                          "id": "fragrance_001",
                          "name": "Spring Blossom",
                          "similarity_score": 0.95,
                          "notes": ["bergamot", "rose", "white musk"],
                          "description": "Fresh and romantic spring fragrance"
                        }
                      ],
                      "metadata": {
                        "total_results": 10,
                        "search_time": 0.047,
                        "timestamp": "2024-01-20T10:30:00Z"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "429": {
            "$ref": "#/components/responses/RateLimit"
          },
          "500": {
            "$ref": "#/components/responses/InternalError"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/generate/recipe": {
      "post": {
        "tags": ["Generation"],
        "summary": "ğŸ§ª í–¥ìˆ˜ ë ˆì‹œí”¼ ìƒì„±",
        "description": "AIë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ì¶¤í˜• í–¥ìˆ˜ ë ˆì‹œí”¼ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.",
        "operationId": "generate_recipe",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecipeGenerationRequest"
              },
              "examples": {
                "romantic_perfume": {
                  "summary": "ë¡œë§¨í‹± í–¥ìˆ˜",
                  "value": {
                    "mood": "romantic",
                    "season": "spring",
                    "intensity": "moderate",
                    "notes_preference": ["rose", "jasmine", "vanilla"],
                    "target_audience": "women",
                    "occasion": "date"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "ë ˆì‹œí”¼ ìƒì„± ì„±ê³µ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecipeGenerationResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/monitoring": {
      "get": {
        "tags": ["Monitoring"],
        "summary": "ğŸ“Š ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë°ì´í„°",
        "description": "ì‹œìŠ¤í…œ ì„±ëŠ¥ ë° ìƒíƒœ ëª¨ë‹ˆí„°ë§ ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.",
        "operationId": "get_monitoring_data",
        "responses": {
          "200": {
            "description": "ëª¨ë‹ˆí„°ë§ ë°ì´í„°",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MonitoringData"
                }
              }
            }
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        },
        "security": [
          {
            "BearerAuth": ["admin"]
          }
        ]
      }
    },
    "/health": {
      "get": {
        "tags": ["Health"],
        "summary": "ğŸ¥ í—¬ìŠ¤ì²´í¬",
        "description": "ì„œë¹„ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.",
        "operationId": "health_check",
        "responses": {
          "200": {
            "description": "ì„œë¹„ìŠ¤ ì •ìƒ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthStatus"
                }
              }
            }
          },
          "503": {
            "description": "ì„œë¹„ìŠ¤ ì´ìš© ë¶ˆê°€",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthStatus"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "SemanticSearchRequest": {
        "type": "object",
        "required": ["query"],
        "properties": {
          "query": {
            "type": "string",
            "description": "ê²€ìƒ‰ ì¿¼ë¦¬ (ìì—°ì–´)",
            "example": "ìƒí¼í•˜ê³  ë¡œë§¨í‹±í•œ ë´„ í–¥ìˆ˜",
            "minLength": 1,
            "maxLength": 500
          },
          "top_k": {
            "type": "integer",
            "description": "ë°˜í™˜í•  ê²°ê³¼ ìˆ˜",
            "default": 10,
            "minimum": 1,
            "maximum": 100
          },
          "min_similarity": {
            "type": "number",
            "description": "ìµœì†Œ ìœ ì‚¬ë„ ì„ê³„ê°’",
            "default": 0.7,
            "minimum": 0.0,
            "maximum": 1.0
          },
          "search_type": {
            "type": "string",
            "enum": ["similarity", "hybrid", "single_collection"],
            "default": "similarity",
            "description": "ê²€ìƒ‰ íƒ€ì…"
          },
          "collection_weights": {
            "type": "object",
            "description": "ì»¬ë ‰ì…˜ë³„ ê°€ì¤‘ì¹˜",
            "additionalProperties": {
              "type": "number"
            }
          },
          "filters": {
            "type": "object",
            "description": "ì¶”ê°€ í•„í„° ì¡°ê±´",
            "properties": {
              "season": {
                "type": "string",
                "enum": ["spring", "summer", "autumn", "winter"]
              },
              "intensity": {
                "type": "string",
                "enum": ["light", "moderate", "strong"]
              },
              "gender": {
                "type": "string",
                "enum": ["masculine", "feminine", "unisex"]
              }
            }
          }
        }
      },
      "SemanticSearchResponse": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "ì›ë³¸ ê²€ìƒ‰ ì¿¼ë¦¬"
          },
          "results": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SearchResult"
            }
          },
          "metadata": {
            "$ref": "#/components/schemas/SearchMetadata"
          }
        }
      },
      "SearchResult": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "í–¥ìˆ˜ ID"
          },
          "name": {
            "type": "string",
            "description": "í–¥ìˆ˜ ì´ë¦„"
          },
          "similarity_score": {
            "type": "number",
            "description": "ìœ ì‚¬ë„ ì ìˆ˜",
            "minimum": 0.0,
            "maximum": 1.0
          },
          "notes": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "í–¥ë£Œ ë…¸íŠ¸"
          },
          "description": {
            "type": "string",
            "description": "í–¥ìˆ˜ ì„¤ëª…"
          },
          "collection": {
            "type": "string",
            "description": "ì†Œì† ì»¬ë ‰ì…˜"
          },
          "metadata": {
            "type": "object",
            "description": "ì¶”ê°€ ë©”íƒ€ë°ì´í„°"
          }
        }
      },
      "RecipeGenerationRequest": {
        "type": "object",
        "required": ["mood"],
        "properties": {
          "mood": {
            "type": "string",
            "description": "ì›í•˜ëŠ” ë¬´ë“œ",
            "example": "romantic"
          },
          "season": {
            "type": "string",
            "enum": ["spring", "summer", "autumn", "winter"],
            "description": "ê³„ì ˆ"
          },
          "intensity": {
            "type": "string",
            "enum": ["light", "moderate", "strong"],
            "default": "moderate"
          },
          "notes_preference": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "ì„ í˜¸í•˜ëŠ” í–¥ë£Œ"
          },
          "target_audience": {
            "type": "string",
            "enum": ["men", "women", "unisex"],
            "default": "unisex"
          },
          "occasion": {
            "type": "string",
            "description": "ì‚¬ìš© ìƒí™©",
            "example": "daily"
          }
        }
      },
      "MonitoringData": {
        "type": "object",
        "properties": {
          "system_status": {
            "type": "object",
            "properties": {
              "cpu_usage": {
                "type": "number",
                "description": "CPU ì‚¬ìš©ë¥  (%)"
              },
              "memory_usage": {
                "type": "number",
                "description": "ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  (%)"
              },
              "disk_usage": {
                "type": "number",
                "description": "ë””ìŠ¤í¬ ì‚¬ìš©ë¥  (%)"
              }
            }
          },
          "api_stats": {
            "type": "object",
            "description": "API í†µê³„"
          },
          "recent_alerts": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        }
      },
      "HealthStatus": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["healthy", "unhealthy", "degraded"]
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "version": {
            "type": "string"
          },
          "checks": {
            "type": "object",
            "properties": {
              "database": {
                "type": "boolean"
              },
              "redis": {
                "type": "boolean"
              },
              "ai_models": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "boolean",
            "example": true
          },
          "error_code": {
            "type": "string",
            "example": "E0001"
          },
          "message": {
            "type": "string",
            "example": "Invalid request parameter"
          },
          "details": {
            "type": "object"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "ì˜ëª»ëœ ìš”ì²­",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Unauthorized": {
        "description": "ì¸ì¦ ì‹¤íŒ¨",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Forbidden": {
        "description": "ê¶Œí•œ ì—†ìŒ",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "RateLimit": {
        "description": "ìš”ì²­ í•œë„ ì´ˆê³¼",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "InternalError": {
        "description": "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT í† í°ì„ ì‚¬ìš©í•œ ì¸ì¦"
      }
    }
  },
  "tags": [
    {
      "name": "Search",
      "description": "ğŸ” í–¥ìˆ˜ ê²€ìƒ‰ ê´€ë ¨ API"
    },
    {
      "name": "Generation",
      "description": "ğŸ§ª í–¥ìˆ˜ ìƒì„± ê´€ë ¨ API"
    },
    {
      "name": "Monitoring",
      "description": "ğŸ“Š ëª¨ë‹ˆí„°ë§ ê´€ë ¨ API"
    },
    {
      "name": "Health",
      "description": "ğŸ¥ í—¬ìŠ¤ì²´í¬ API"
    }
  ]
}